(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{gD0J:function(e,t,a){e.exports={"staff-header":"antd-pro-pages-staff-staff-manager-staff-header","staff-table":"antd-pro-pages-staff-staff-manager-staff-table","editable-cell":"antd-pro-pages-staff-staff-manager-editable-cell","editable-cell-value-wrap":"antd-pro-pages-staff-staff-manager-editable-cell-value-wrap","editable-row":"antd-pro-pages-staff-staff-manager-editable-row"}},hoTU:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=l(a("2/Rp"));a("g9YV");var r=l(a("wCAj"));a("5NDa");var d=l(a("5rEg")),f=l(a("p0pE")),i=l(a("2Taf")),u=l(a("vZ4D")),o=l(a("l4Ni")),s=l(a("ujKo")),c=l(a("MhPg"));a("y8nQ");var p,m,g,v,h=l(a("Vl3Y")),y=l(a("Y/ft")),b=l(a("q1tI")),E=a("Hx5s"),x=l(a("gD0J")),S=a("Hg0r"),k=b.default.createContext(),I=function(e){var t=e.form,a=(e.index,(0,y.default)(e,["form","index"]));return b.default.createElement(k.Provider,{value:t},b.default.createElement("tr",a))},w=h.default.create()(I),C=function(e){function t(){var e,a;(0,i.default)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return a=(0,o.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(n))),a.state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},function(){e&&a.input.focus()})},a.save=function(e){var t=a.props,l=t.record,n=t.handleSave;a.form.validateFields(function(t,r){t&&t[e.currentTarget.id]||(a.toggleEdit(),n((0,f.default)({},l,r)))})},a.renderCell=function(e){a.form=e;var t=a.props,l=t.children,n=t.dataIndex,r=t.record,f=t.title,i=a.state.editing;return i?b.default.createElement(h.default.Item,{style:{margin:0}},e.getFieldDecorator(n,{rules:[{required:!0,type:"email",message:"".concat(f,"\u683c\u5f0f\u4e0d\u5bf9\uff01")}],initialValue:r[n]})(b.default.createElement(d.default,{ref:function(e){return a.input=e},onPressEnter:a.save,onBlur:a.save}))):b.default.createElement("div",{className:x.default["editable-cell-value-wrap"],style:{paddingRight:24},onClick:a.toggleEdit},l)},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),l=(0,y.default)(e,["editable","dataIndex","title","record","index","handleSave","children"]);return b.default.createElement("td",l,t?b.default.createElement(k.Consumer,null,this.renderCell):a)}}]),t}(b.default.PureComponent),M=function(e){function t(e){return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).call(this,e))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dataSource,l=t.loading,n={body:{row:w,cell:C}},d=this.props.columns.map(function(t){return t.editable?(0,f.default)({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.props.handleSave}}}):t});return b.default.createElement(r.default,{components:n,rowClassName:x.default["editable-row"],bordered:!0,dataSource:a,columns:d,loading:l})}}]),t}(b.default.PureComponent),D=(p=(0,S.connect)(function(e){var t=e.staffManager,a=e.loading;return{staffManager:t,loading:a.effects["staffManager/filterStaffs"],loadingAll:a.effects["staffManager/getAllStaffs"]}}),m=h.default.create(),p(g=m((v=function(e){function t(e){var a;return(0,i.default)(this,t),a=(0,o.default)(this,(0,s.default)(t).call(this,e)),a.filterStaffs=function(e){e.preventDefault();var t=a.props,l=t.form,n=t.dispatch;l.validateFields(function(e,t){n({type:"staffManager/filterStaffs",payload:t})})},a.state={isLoading:!1},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"staffManager/getAllStaffs"})}},{key:"handleSave",value:function(e){var t=this.props.dispatch;t({type:"staffManager/saveStaffEmail",payload:e})}},{key:"render",value:function(){var e=this,t=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u90e8\u95e8",dataIndex:"department",key:"department"},{title:"\u6027\u522b",dataIndex:"sex",key:"sex"},{title:"\u5f00\u6237\u94f6\u884c",dataIndex:"depositBank",key:"depositBank"},{title:"\u94f6\u884c\u8d26\u53f7",dataIndex:"bankAccount",key:"bankAccount"},{title:"\u5165\u804c\u65f6\u95f4",dataIndex:"entryDate",key:"entryDate"},{title:"\u7535\u8bdd",dataIndex:"telephone",key:"telephone"},{title:"\u90ae\u7bb1",dataIndex:"email",key:"email",editable:!0}],a=this.props,l=a.staffManager.dataSource,r=a.form.getFieldDecorator,f=a.loading,i=a.loadingAll;this.state.isLoading;return b.default.createElement(E.PageHeaderWrapper,null,b.default.createElement("div",{className:x.default["staff-header"]},b.default.createElement(h.default,{layout:"inline",onSubmit:this.filterStaffs},b.default.createElement(h.default.Item,{label:"\u5458\u5de5\u59d3\u540d"},r("name",{initialValue:""})(b.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))),b.default.createElement(h.default.Item,{label:"\u90e8\u95e8"},r("department",{initialValue:""})(b.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))),b.default.createElement(h.default.Item,null,b.default.createElement(n.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))),b.default.createElement("div",{className:x.default["staff-table"]},b.default.createElement(M,{loading:f||i,columns:t,dataSource:l,handleSave:function(t){return e.handleSave(t)}})))}}]),t}(b.default.PureComponent),g=v))||g)||g),A=D;t.default=A}}]);